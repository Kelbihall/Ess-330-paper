---
title: Lab 7: Final Project - Intro/Methods Draft

authors:
  - name: Kelbi Hall
    affiliation: Colorado State University 
    roles: writing
    corresponding: true
  - name: Chloe Rogozinski
    affiliation: Colorado State University
    roles: writing
    corresponding: false
  - name: Gabriela Valdez
    affiliation: Colorado State University
    roles: writing
    corresponding: false

bibliography: references.bib
---

## Final Project Intro & Methods 

[@w14071073]
[@su17010069]
[@leung2023china]
[@worldbank2022india]
[@worldbank2023freshwater]
[@worldbank2023textiles]


Title:Wasting Water for Wardrobes: Analyzing Water Stress and Textile Manufacturing in Fast Fashion

# Introduction, Background, and Motivation

# Exploring your Data 

[@worldbank2023freshwater]
[@worldbank2023textiles]

```{r}
# Load packages
library(tidyverse)
library(readxl)

# Read Excel files from data/ folder
water <- read_excel("data/API_ER.H2O.FWST.ZS_DS2_en_excel_v2_14076.xls", skip = 3)
textiles <- read_excel("data/API_NV.MNF.TXTL.ZS.UN_DS2_en_excel_v2_26490.xls", skip = 3)

# Reshape to long format (match all 4-digit year columns)
water_long <- water %>%
  pivot_longer(cols = matches("^\\d{4}$"),
               names_to = "Year", values_to = "WaterStress") %>%
  select(`Country Name`, `Country Code`, Year, WaterStress)

textiles_long <- textiles %>%
  pivot_longer(cols = matches("^\\d{4}$"),
               names_to = "Year", values_to = "TextileValue") %>%
  select(`Country Name`, `Country Code`, Year, TextileValue)

# Merge datasets by country and year
combined <- left_join(water_long, textiles_long, by = c("Country Name", "Country Code", "Year"))

# Convert year to numeric
combined$Year <- as.numeric(combined$Year)
```

```{r}
# Preview the water stress data
water_long %>%
  filter(!is.na(WaterStress)) %>%
  head(10)
```

```{r}
# Preview the textile manufacturing data
textiles_long %>%
  filter(!is.na(TextileValue)) %>%
  head(10)
```

```{r}
# Count missing values
cat("Missing Water Stress values:", sum(is.na(water_long$WaterStress)), "\n")
cat("Missing Textile Manufacturing values:", sum(is.na(textiles_long$TextileValue)), "\n")
```

