<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lab 7 Final Project - Intro/Methods Draft</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-81e35ebdb4125010edbabe6010586085.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


<meta name="citation_title" content="Lab 7 Final Project - Intro/Methods Draft">
<meta name="citation_author" content="Kelbi Hall">
<meta name="citation_author" content="Chloe Rogozinski">
<meta name="citation_author" content="Gabriela Valdez">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=The environmental impacts of fast fashion on water quality: A systematic review;,citation_author=K. Bailey;,citation_author=A. Basu;,citation_author=S. Sharma;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_issue=7;,citation_doi=10.3390/w14071073;,citation_volume=14;,citation_journal_title=Water (Basel);">
<meta name="citation_reference" content="citation_title=Unraveling the environmental impacts of the fashion industry: A fourier-based analysis of pollution dynamics and causality across five countries;,citation_author=M. Bildirici;,citation_author=I. Türkkahraman;,citation_author=Ö. Ö. Ersin;,citation_publication_date=2025;,citation_cover_date=2025;,citation_year=2025;,citation_issue=1;,citation_doi=10.3390/su17010069;,citation_volume=17;,citation_journal_title=Sustainability;">
<meta name="citation_reference" content="citation_title=Tackling china’s water shortage crisis;,citation_author=K. C. Leung;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_fulltext_html_url=https://earth.org/tackling-chinas-water-shortage-crisis/;">
<meta name="citation_reference" content="citation_title=How is india addressing its water needs?;,citation_author=World Bank;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://www.worldbank.org/en/country/india/brief/world-water-day-2022-how-india-is-addressing-its-water-needs;">
<meta name="citation_reference" content="citation_title=Freshwater withdrawal as % of internal resources (ER.H2O.FWST.ZS);,citation_author=World Bank;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_fulltext_html_url=https://data.worldbank.org/indicator/ER.H2O.FWST.ZS;">
<meta name="citation_reference" content="citation_title=Textiles and clothing, value added (% of manufacturing) (NV.MNF.TXTL.ZS.UN);,citation_author=World Bank;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_fulltext_html_url=https://data.worldbank.org/indicator/NV.MNF.TXTL.ZS.UN;">
</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Lab 7 Final Project - Intro/Methods Draft</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
            <div class="quarto-title-meta-author">
          <div class="quarto-title-meta-heading">Authors</div>
          <div class="quarto-title-meta-heading">Affiliation</div>
          
                <div class="quarto-title-meta-contents">
            <p class="author">Kelbi Hall </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Colorado State University
                      </p>
                  </div>
                      <div class="quarto-title-meta-contents">
            <p class="author">Chloe Rogozinski </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Colorado State University
                      </p>
                  </div>
                      <div class="quarto-title-meta-contents">
            <p class="author">Gabriela Valdez </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Colorado State University
                      </p>
                  </div>
                    </div>
        
        <div class="quarto-title-meta">

                      
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      <div class="quarto-alternate-formats"><div class="quarto-title-meta-heading">Other Formats</div><div class="quarto-title-meta-contents"><p><a href="index.docx"><i class="bi bi-file-word"></i>MS Word</a></p></div><div class="quarto-title-meta-contents"><p><a href="index-meca.zip" data-meca-link="true"><i class="bi bi-archive"></i>MECA Bundle</a></p></div></div></div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#title-wasting-water-for-wardrobes-analyzing-water-stress-and-textile-manufacturing-in-fast-fashion" id="toc-title-wasting-water-for-wardrobes-analyzing-water-stress-and-textile-manufacturing-in-fast-fashion" class="nav-link active" data-scroll-target="#title-wasting-water-for-wardrobes-analyzing-water-stress-and-textile-manufacturing-in-fast-fashion">1. Title: Wasting Water for Wardrobes: Analyzing Water Stress and Textile Manufacturing in Fast Fashion</a></li>
  <li><a href="#introduction-background-and-motivation" id="toc-introduction-background-and-motivation" class="nav-link" data-scroll-target="#introduction-background-and-motivation">2. Introduction, Background, and Motivation</a></li>
  <li><a href="#exploring-the-data" id="toc-exploring-the-data" class="nav-link" data-scroll-target="#exploring-the-data">3.Exploring the Data</a></li>
  <li><a href="#preliminary-methods-and-planning" id="toc-preliminary-methods-and-planning" class="nav-link" data-scroll-target="#preliminary-methods-and-planning">4. Preliminary Methods and Planning</a></li>
  </ul>
<div class="quarto-alternate-notebooks"><h2>Notebooks</h2><ul><li><a href="index-preview.html"><i class="bi bi-journal-code"></i>Article Notebook</a></li></ul></div></nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">



  


<section id="title-wasting-water-for-wardrobes-analyzing-water-stress-and-textile-manufacturing-in-fast-fashion" class="level1">
<h1>1. Title: Wasting Water for Wardrobes: Analyzing Water Stress and Textile Manufacturing in Fast Fashion</h1>
</section>
<section id="introduction-background-and-motivation" class="level1">
<h1>2. Introduction, Background, and Motivation</h1>
<p>The fast fashion industry is among the most polluting in the world, contributing approximately 8% of total global carbon emissions and consuming 20% of all global wastewater—about 79 trillion liters (Bailey et al., 2022). As demand grows, many companies outsource production to low- and middle-income countries due to cheaper labor and manufacturing costs, which in turn drives down prices and boosts consumer appeal. According to The Environmental Impacts of Fast Fashion on Water Quality, brands today release twice as many collections as they did before the 2000s. With lower quality and cost, garments are consumed and discarded more rapidly, accelerating water usage and waste (Bailey et al., 2022). Chemical use in textile production also poses significant environmental threats. Pesticides used in cotton farming lead to runoff that introduces excessive nutrients into waterways, resulting in dead zones caused by algal blooms. Additionally, fabric dyeing processes account for 17–20% of industrial water pollution globally due to the release of hazardous chemicals (Bildirici et al., 2024). According to the World Trade Organization’s 2022 analysis, China is the largest global textile exporter, accounting for 31.7% of exports. Bangladesh and India follow with 7.9% and 3.1% respectively (Bildirici et al., 2024). This project focuses on water-stressed areas in these three major textile-producing countries. China, with 20% of the world’s population, has access to only 6% of global freshwater. Uneven distribution and widespread pollution have caused severe water scarcity in many regions (Leung, 2023). India holds 18% of the world’s population but only 4% of freshwater resources. Poor water sanitation practices leave 600 million people without reliable access to usable water (World Bank, 2023). Although Bangladesh has access to 3% of the world’s freshwater and accounts for just 2% of the global population, only 40% of its population has access to safe water. Cotton production places immense stress on freshwater availability, as growing just one pair of jeans requires 7,500–10,000 liters of water—the equivalent of what one person would drink over seven years (Bildirici et al., 2024).</p>
<p><span class="citation" data-cites="w14071073">(<a href="#ref-w14071073" role="doc-biblioref">Bailey, Basu, and Sharma 2022</a>)</span> <span class="citation" data-cites="su17010069">(<a href="#ref-su17010069" role="doc-biblioref">Bildirici, Türkkahraman, and Ersin 2025</a>)</span> <span class="citation" data-cites="leung2023china">(<a href="#ref-leung2023china" role="doc-biblioref">Leung 2023</a>)</span> <span class="citation" data-cites="worldbank2022india">(<a href="#ref-worldbank2022india" role="doc-biblioref">World Bank 2022</a>)</span> <span class="citation" data-cites="worldbank2023freshwater">(<a href="#ref-worldbank2023freshwater" role="doc-biblioref">World Bank 2023a</a>)</span> <span class="citation" data-cites="worldbank2023textiles">(<a href="#ref-worldbank2023textiles" role="doc-biblioref">World Bank 2023b</a>)</span></p>
<p>Our Data</p>
<p>Our main focus in this project is to bring into light the realities of neglectful consumption of water from the fast fashion industry in already resource scarce countries. This study draws on two key datasets:</p>
<p>Water Stress Dataset (FAO/AQUASTAT) Indicator: ER.H2O.FWST.ZS This dataset reflects the level of water stress in each country, defined as the ratio of total freshwater withdrawn to total renewable freshwater resources, expressed as a percentage. Higher values indicate greater pressure on a country’s freshwater supply.</p>
<p>Textile Manufacturing Dataset (World Bank) Indicator: NV.MNF.TXTL.ZS.UN This data presents the textile industry’s value added as a percentage of total manufacturing output in each country, across multiple years. It provides a proxy for understanding the relative importance of the textile sector within a country’s economy.</p>
<p>By aligning these datasets by country and year, we can evaluate correlations between water stress and the proportion of manufacturing focused on textiles. This will help identify countries where textile production may be disproportionately contributing to water scarcity.</p>
<p><span class="citation" data-cites="worldbank2023freshwater">(<a href="#ref-worldbank2023freshwater" role="doc-biblioref">World Bank 2023a</a>)</span> <span class="citation" data-cites="worldbank2023textiles">(<a href="#ref-worldbank2023textiles" role="doc-biblioref">World Bank 2023b</a>)</span></p>
<p>Our Methods</p>
<p>Data Alignment and Cleaning: We will align both datasets by Country Name and Year. Initial checks will be done to remove null or inconsistent values. Data will be filtered to include only countries with at least 10 years of overlapping data for both indicators.</p>
<p>Exploratory Data Analysis (EDA):</p>
<p>Time series visualization of water stress and textile production for high-output countries (e.g., India, Bangladesh, China).</p>
<p>Correlation matrix and scatterplots to assess the strength and nature of the relationship between water stress and textile manufacturing percentages.</p>
<p>Identification of outliers or patterns (e.g., countries with high textile production but low water stress).</p>
</section>
<section id="exploring-the-data" class="level1">
<h1>3.Exploring the Data</h1>
<p>The two datasets we are using are from the data world bank and one shows the percentage of manufacturing focused on textile production by country and year while the other one has the same set up but looks at the water stress level each year by country.</p>
<ol type="1">
<li>Water Stress Dataset Source: World Bank Open Data – Freshwater withdrawals as a proportion of available freshwater resources (ER.H2O.FWST.ZS) https://data.worldbank.org/indicator/ER.H2O.FWST.ZS Description: This dataset tracks national water stress levels by measuring the percentage of renewable freshwater resources that are withdrawn each year. It is commonly used to evaluate a country’s overall water scarcity risk. Higher percentages indicate more severe water stress and can be caused by industrial, agricultural, or domestic water demand. The data is reported annually by country. Columns (after reshaping): Country Name: Name of the country</li>
</ol>
<p>Country Code: ISO 3-letter country code</p>
<p>Year: Year of the measurement</p>
<p>WaterStress: Percentage of total renewable freshwater resources withdrawn</p>
<ol start="2" type="1">
<li>Textile Manufacturing Dataset Source: World Bank Open Data – Textile manufacturing, value added (% of manufacturing) (NV.MNF.TXTL.ZS.UN) https://data.worldbank.org/indicator/NV.MNF.TXTL.ZS.UN Description: This dataset captures the contribution of the textile industry to each country’s total manufacturing output, expressed as a percentage. It reflects the economic weight of textile manufacturing, including garment production, fabric treatment, and fiber processing. Countries with large fast fashion supply chains typically have a higher percentage in this metric. Columns (after reshaping): Country Name: Name of the country</li>
</ol>
<p>Country Code: ISO 3-letter country code</p>
<p>Year: Year of the observation</p>
<p>TextileValue: Percentage of total manufacturing value from textiles</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   `Country Name` `Country Code` Year  WaterStress
   &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;       &lt;dbl&gt;
 1 Afghanistan    AFG            1975         28.9
 2 Afghanistan    AFG            1976         32.4
 3 Afghanistan    AFG            1977         35.8
 4 Afghanistan    AFG            1978         39.3
 5 Afghanistan    AFG            1979         42.8
 6 Afghanistan    AFG            1980         46.2
 7 Afghanistan    AFG            1981         49.7
 8 Afghanistan    AFG            1982         53.2
 9 Afghanistan    AFG            1983         56.6
10 Afghanistan    AFG            1984         60.1</code></pre>
</div>
<a class="quarto-notebook-link" id="nblink-1" href="index-preview.html">Source: Article Notebook</a></div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   `Country Name` `Country Code` Year  TextileValue
   &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;        &lt;dbl&gt;
 1 Albania        ALB            2010          26.4
 2 Albania        ALB            2011          31.5
 3 Albania        ALB            2012          27.3
 4 Albania        ALB            2013          31.1
 5 Albania        ALB            2014          32.7
 6 Albania        ALB            2015          32.4
 7 Albania        ALB            2016          33.7
 8 Albania        ALB            2017          34.9
 9 Albania        ALB            2018          36.6
10 Albania        ALB            2019          36.4</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Missing Water Stress values: 11000 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Missing Textile Manufacturing values: 13692 </code></pre>
</div>
</div>
</section>
<section id="preliminary-methods-and-planning" class="level1">
<h1>4. Preliminary Methods and Planning</h1>
<p>To explore the connection between fast fashion and water stress, we’re starting with exploratory data analysis and some basic statistics to help us understand the patterns in both datasets. Planned Methods We plan to use time series plots to look at water stress and textile manufacturing over time, especially in countries like India, China, and Bangladesh where textile output is high. We’ll also create scatterplots and run simple correlation tests to see if there’s a relationship between the two variables across countries and years. If the data supports it, we might use grouped summaries or rankings to highlight countries facing both high water stress and high textile manufacturing percentages. Later on, if it makes sense, we may try a simple linear regression to see how well textile output predicts water stress. Do We Have Everything We Need Right now, we’re working with two solid datasets that give us a national-level view of water stress and textile manufacturing. This gives us a strong starting point, but we’re also interested in bringing in a third dataset that shows the number of fast fashion companies operating in each country. That would help us connect the environmental side of the story with the actual industry presence and possibly strengthen our analysis. Challenges in the Data One challenge is missing values. Some countries have incomplete records or gaps for certain years, which could limit how many data points we can actually use. Another challenge is scale. Both datasets are national-level, so we’re not capturing what’s happening at the regional level where production and water use might be more concentrated. Lastly, some countries may define or report textile manufacturing a little differently, which could affect consistency. Challenges in the Methods Even if we find a strong correlation, it won’t mean that one variable is directly causing the other. There could be other factors at play like agriculture, urbanization, or climate that influence water stress. Also, if we decide to use more advanced methods like regression, we’ll need to make sure our data is complete enough and that we’re not oversimplifying complex issues. Why These Methods Fit Our Goals The methods we’ve outlined help us start answering our main question by identifying patterns that connect fast fashion production with water use. By looking at changes over time and comparing countries, we can begin to understand where this relationship is the strongest. This approach allows us to stay rooted in real-world data while setting the stage for deeper insights and possible solutions later on.</p>

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-w14071073" class="csl-entry" role="listitem">
Bailey, K., A. Basu, and S. Sharma. 2022. <span>“The Environmental Impacts of Fast Fashion on Water Quality: A Systematic Review.”</span> <em>Water (Basel)</em> 14 (7): 1073. <a href="https://doi.org/10.3390/w14071073">https://doi.org/10.3390/w14071073</a>.
</div>
<div id="ref-su17010069" class="csl-entry" role="listitem">
Bildirici, M., I. Türkkahraman, and Ö. Ö. Ersin. 2025. <span>“Unraveling the Environmental Impacts of the Fashion Industry: A Fourier-Based Analysis of Pollution Dynamics and Causality Across Five Countries.”</span> <em>Sustainability</em> 17 (1): 69. <a href="https://doi.org/10.3390/su17010069">https://doi.org/10.3390/su17010069</a>.
</div>
<div id="ref-leung2023china" class="csl-entry" role="listitem">
Leung, K. C. 2023. <span>“Tackling China’s Water Shortage Crisis.”</span> 2023. <a href="https://earth.org/tackling-chinas-water-shortage-crisis/">https://earth.org/tackling-chinas-water-shortage-crisis/</a>.
</div>
<div id="ref-worldbank2022india" class="csl-entry" role="listitem">
World Bank. 2022. <span>“How Is India Addressing Its Water Needs?”</span> 2022. <a href="https://www.worldbank.org/en/country/india/brief/world-water-day-2022-how-india-is-addressing-its-water-needs">https://www.worldbank.org/en/country/india/brief/world-water-day-2022-how-india-is-addressing-its-water-needs</a>.
</div>
<div id="ref-worldbank2023freshwater" class="csl-entry" role="listitem">
———. 2023a. <span>“Freshwater Withdrawal as % of Internal Resources (ER.H2O.FWST.ZS).”</span> <a href="https://data.worldbank.org/indicator/ER.H2O.FWST.ZS">https://data.worldbank.org/indicator/ER.H2O.FWST.ZS</a>.
</div>
<div id="ref-worldbank2023textiles" class="csl-entry" role="listitem">
———. 2023b. <span>“Textiles and Clothing, Value Added (% of Manufacturing) (NV.MNF.TXTL.ZS.UN).”</span> <a href="https://data.worldbank.org/indicator/NV.MNF.TXTL.ZS.UN">https://data.worldbank.org/indicator/NV.MNF.TXTL.ZS.UN</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>